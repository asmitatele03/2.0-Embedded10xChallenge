Switch-Based Counter on 16Ã—2 LCD | ARM LPC2129

This project demonstrates how to interface a 16Ã—2 LCD with the ARM7 LPC2148 microcontroller and display a two-digit 
counter, which increments each time a switch is pressed.

ğŸ”§ Key Concepts Covered

GPIO configuration on LPC2148

LCD interfacing in 8-bit/4-bit mode (as per your driver file)

Debouncing logic using simple while(sw==0)

Displaying numerical values on LCD using ASCII conversion

Modular programming using separate driver files (lcd_driver.c, delay.c, etc.)

â–¶ï¸ How the Code Works

The LCD is initialized using custom lcd_init() and command functions.

A variable c stores the current count (0â€“9).

Inside the infinite loop:

The LCD cursor is set to the first line (0x80).

The two digits of the counter are calculated:

Tens digit â†’ (c/10)+48

Units digit â†’ (c%10)+48

LCD is refreshed using command 0x01.

When the switch (P0.14) is pressed:

The counter increments.

Rolls back to 0 after 9.

Debouncing is done with while(sw==0);

ğŸ“ Pin Connection
Component	LPC2148 Pin
Switch	P0.14
LCD D0-D7, RS, RW, EN	As per your lcd_driver.c configuration
ğŸ“‚ Included Files

main.c â€“ Main program

lcd_driver.c â€“ LCD command & data functions

delay.c â€“ Software delay

header.h â€“ Function declarations

ğŸ¯ Outcome

When the button is pressed, the LCD displays:

00
01
02
...
09
00 (rolls over)


ğŸ“Ÿ LCD Scrolling Text Program â€“ Embedded C (ARM LPC21xx)

This program demonstrates scrolling text animation on a 16Ã—2 LCD using Embedded C on the LPC21xx ARM7 microcontroller.
The code takes a predefined string (`"vector"`) and shifts it across the LCD screen by repeatedly moving the cursor and re-printing the string.

ğŸ§  Explanation of the Code

1. Header Files
#include <lpc21xx.h>
#include "header.h"

* `lpc21xx.h` â†’ Contains register definitions for the LPC2129/LPC2148 ARM7 microcontroller.
* `header.h` â†’ Your custom header file with LCD function prototypes (`lcd_init`, `lcd_cmd`, `lcd_string`, etc.).

2. Macro Definition

#define S "vector"

* Defines the string to be scrolled on the LCD.
* You can replace `"vector"` with any word you want to scroll.

3. Main Function**

int main()
{
    int i, j, k;

    lcd_init();         // Initializes LCD in 4-bit/8-bit mode
    lcd_cmd(0x01);      // Clears the display

* Variables:

  * `i` â†’ loop counter
  * `j` â†’ stores string length
  * `k` â†’ stores the shifting index

4. Main Loop

while(1)
{
    j = strlen(S);  // Find length of the string
    k = 1;          // Start shifting from index 1

* `strlen()` determines how many characters are in `"vector"`.

5. Scrolling Logic

for(i = 0; i < 16; i++)
{
    lcd_cmd(0x80 + i);   // Move cursor to the next LCD column
    lcd_string(S);        // Print the full string

    delay_ms(500);        // Delay for visibility
    lcd_cmd(0x01);        // Clear display

    k++;
    if(k == j)
        k = 0;

    lcd_string(S + k);    // Print string starting from index 'k'
}
ğŸ” How the Scrolling Works

* `0x80 + i` â†’ Moves the cursor across the 1st row of the LCD.
* `lcd_string(S)` â†’ Prints `"vector"` normally.
* `lcd_cmd(0x01)` â†’ Clears the screen to show the next shifted version.
* `lcd_string(S + k)` â†’ Prints the string starting from index `k`.

Example:

If `S = "vector"`

| k | Printed String      |
| - | ------------------- |
| 0 | vector              |
| 1 | ector               |
| 2 | ctor                |
| 3 | tor                 |
| 4 | or                  |
| 5 | r                   |
| 6 | (loops back) vector |

This creates a dynamic scrolling animation on the LCD.

ğŸ“ Features

* Works with LPC21xx ARM7 microcontrollers
* LCD driver fully in C
* Demonstrates:

  * Cursor shifting
  * String manipulation
  * LCD command control
  * Dynamic scrolling effect

ğŸ§ª Hardware Requirements  

* LPC2129 / LPC2148 ARM7 board
* 16Ã—2 LCD (HD44780-based)
* Potentiometer for contrast
* Jumper wires
* Power supply




